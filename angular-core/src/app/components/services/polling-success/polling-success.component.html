<div class="pollingSuccess-container">
  <h1>Services</h1>
  <section class="pollingSuccess-content">

    <mat-card appearance="outlined"
              class="pollingSuccess-contentItem">
      <mat-card-header>
        <mat-card-title>Polling Service</mat-card-title>
        <mat-card-subtitle>Poll using RxJS. This will poll using lastestValueFrom, and will stop polling only when the
          value is success, hence it will return only success
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        @if (isLoading()) {
          <mat-progress-bar mode="determinate"
                            [value]=progress()/>
            <span>Current attempt: {{ currentAttemptCount() }}</span>
        } @else {
          <p> The result is:</p>
          <mat-divider/>
          <p> {{ result() | json }}</p>
        }
      </mat-card-content>

      <mat-card-actions>
        <button mat-button
                (click)="startPolling()">Start polling
        </button>
      </mat-card-actions>
    </mat-card>

  </section>
</div>
